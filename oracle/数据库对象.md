 ### 视图
 视图是一张虚拟表，其内容由查询定义，同真实的表一样，视图包含一系列带有名称的列和行数据。但是，视图并不在数据库中以存储的数据值集形式存在。
 行和列数据来自由定义视图的查询所引用的表，并且在引用视图时动态生成。(视图不是真实存在磁盘上的)
 
 #### 视图与表的区别
 1、表需要占用磁盘空间，视图不需要
 2、视图不能添加索引(所以查询速度略微慢点)
 3、使用视图可以简化，复杂查询
 4、视图的使用利于提高安全性
 比如：不同用户查看不同视图
 
#### 创建/修改视图
 - 创建视图
 create view 视图名 as select 语句 [with read only]
 - 创建或修改视图
 create or replace view 视图名 as select 语句 [with read only]
 - 删除视图
 drop view 视图名
 
 ```
 create view v_dept
    as
    select count(*) num,dept from tb_s group by dept
	
```

### 什么是序列
序列: Sequence 是oracle提供的用于产生一系列唯一数字的数据库对象。由于oracle中没有设置自增列的方法，所以我们在oracle数据库中主要用序列来实现主键自增的功能。

#### 怎么样创建序列
```
CREATE SEQUENCE sequence //创建序列名称
[INCREMENT BY n] //递增的序列值是 n 如果 n 是正数就递增,如果是负数就递减 默认是 1
[START WITH n] //开始的值,递增默认是 minvalue 递减是 maxvalue
[{MAXVALUE n | NOMAXVALUE}] //最大值  
[{MINVALUE n | NOMINVALUE}] //最小值
[{CYCLE | NOCYCLE}] //循环/不循环
[{CACHE n | NOCACHE}];//分配并存入到内存中
```
​
#### 如何使用序列
序列创建后,可以使用序列的NEXTVAL来获取序列的下一个值,使用CURRVAL来查看当前值。第一次使用必须先使用NEXTVAL来产生一个值后才可以使用CURRVAL进行查看。
```
//序列调用 产生一个新的序列
select seq_test.nextval from dual
//查看当前序列的值
select seq_test.currval from dual

-- Create sequence 
create sequence SEQ_TEST
minvalue 1
maxvalue 999999999999999999999999999
start with 1
increment by 1
cache 20;
```


### 索引

如果一本书只有几页，读者随便翻翻就能很快的找到具体的内容，根本不需要目录，如果一本书有几百页、几千页，没有目录，查找内容的将需要更长的时间，书越厚，耗时越长。

索引，即表的索引，它对表的重要性就像目录对书一样重要，索引可以大幅提升数据查找的效率。

1、索引的特点
1）索引是表的一部分，是可选的，表可以没有索引，就像书可以没有目录一样，数据库不做强制要求。

2）合理的索引可以提高数据查找的效率，减少磁盘I/O。

3）唯一索引可以约束表数据的完整性。

4）索引也是数据，需要存储空间。

5）数据库自动维护索引的内容，当对表的记录进行了增、删、改的操作时，数据库会自动更新索引。

6）索引虽然可以提高数据查找的效率，但对表进行增、删、改操作时，数据库除了维护表中的数据，还要维护索引，所以，索引会让增、删、改操作的效率下降。

7）索引提升了数据查找的效率，降低了数据操作的效率，在设计表和索引的时候，要根据实际情况在两者之间权衡。

#### 索引的分类
索引可分为普通索引、唯一索引、反向键索引、位图索引和基于函数的索引，常用的是普通索引和唯一索引，其它三种极少使用，我也不建议使用。
创建普通索引的语法如下：

create index 索引名 on 表名(字段名1,字段名2,......,字段名n);

create index idx_tbs  on tb_s(name);


#### 唯一索引
如果表中的列没有重复的值，是唯一的，就可以创建唯一索引，唯一索引的效率比普通索引要高很多。

创建普通索引的语法如下：

create unique index 索引名 on 表名(字段名1,字段名2,......,字段名n);

create unique index IDX_TBC_1 on TB_C(keyid);


主建是唯一索引
不要为表的主建创建索引，因为Oracle自动为表的主建字段创建唯一索引。



#### 删除索引
当表被删除时，表的索引会被自动删除，也可以采用drop index命令删除索引。

语法：

drop index 索引名;


#### 修改索引

1、重建索引
重建索引可以减少硬盘碎片和提高数据库系统的性能。
语法：
alter index 索引名 rebuild;

2、整理碎片
对索引的无用空间进行合并，减少硬盘碎片和提高数据库系统的性能。
语法：
alter index 索引名 coalesce;

3、修改索引名
语法：
alter index 索引名 rename to 新索引名;

4、禁用索引
语法：
alter index 索引名 unusable;

索引被禁用后，如果要启用，需要用rebuild重建。 